@model IEnumerable<QLKS.Models.Revervation>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

<div class="col-md-12">
    <div class="portlet light   ">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-pin font-red"></i>
                <span class="caption-subject font-red sbold uppercase">Danh sách đặt phòng</span>
            </div>
            <div class="actions box_button">
                @Html.ActionLink("Đặt phòng", "ChooseDateReservation", "Revervation", new { @class = "btn" })
            </div>

        </div>
        <div class="portlet-body">

            <table class="table table-striped table-hover scroll" id="dataTables" border="1">
                <thead>
                    <tr>
                        <th style ="width: 15%">
                            @Html.DisplayNameFor(model => model.ReservationsRooms)
                        </th>
                        
                        <th style ="width: 15%">
                            @Html.DisplayNameFor(model => model.Customer.Name)
                        </th>
                        <th style ="width: 15%">
                            @Html.DisplayNameFor(model => model.Customer.IDCard)
                        </th>
                        <th style ="width: 10%">
                            @Html.DisplayNameFor(model => model.PeopleNumber)
                        </th>
                         <th style ="width: 10%">
                            @Html.DisplayNameFor(model => model.BookingDate)
                        </th>
                        <th style ="width: 10%">
                            @Html.DisplayNameFor(model => model.DateIn)
                        </th>
                        <th style ="width: 10%">
                            @Html.DisplayNameFor(model => model.DateOut)
                        </th> 
                       
                        <th  style ="width: 25%"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td style ="width: 15%" >
                                @{var i_count = 0; }
                                @foreach (var modelItem in item.ReservationsRooms)
                                {
                                    i_count++;
                                    @Html.DisplayFor(itemmodel => modelItem.Room.Position) 
                       
                                    if (i_count < item.ReservationsRooms.Count())
                                    {
                                    <span>,</span>
                                    }
                                }
                            </td>
                            
                            <td  style ="width: 15%">
                                @Html.DisplayFor(modelItem => item.Customer.Name)
                            </td>
                            <td  style ="width: 15%">
                                @Html.DisplayFor(modelItem => item.Customer.IDCard)
                            </td>
                            <td  style ="width: 10%">
                                @Html.DisplayFor(modelItem => item.PeopleNumber)
                            </td>
                            <td  style ="width: 10%">
                                @Html.DisplayFor(modelItem => item.BookingDate)
                            </td>
                            <td  style ="width: 10%">
                                @Html.DisplayFor(modelItem => item.DateIn)
                            </td>
                            <td  style ="width: 10%">
                                @Html.DisplayFor(modelItem => item.DateOut)
                            </td> 
                            
                            <td  style ="width: 25%">
                                @Html.ActionLink("Nhận phòng",  "../CheckIn/CreateCheckin", new { resvationsID = item.ReservationID }) |
                                @Html.ActionLink("Hủy đặt phòng", "Deactive", new { id = item.ReservationID }, new { onclick="return confirm('Bạn có chắc chắn muốn hủy đặt phòng?')" })
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
